<html>

<head>
<title>
Ephemerides of the Largest Asteroids: README
</title>
</head>

<body background="#eeeeee">
<basefont size=3>

<h1>
<b>
<center> U.S. Naval Observatory Ephemerides of the Largest Asteroids </center>
</b>
</h1>

<hr>

<center><h2> TABLE OF CONTENTS </h2></center>

<ul>
<h2>
<li> <a href="#introduction">Introduction</a>
<li> <a href="#ephemerides">Ephemeris Files</a>
<li> <a href="#generating">Generating the Chebyshev Polynomials</a>
<li> <a href="#reading">Reading the Ephemerides</a>
<li> <a href="#testing">Testing the Ephemerides</a>
<li> <a href="#references">References</a>
<li> <a href="#novas">Appendix A: NOVAS</a>
<li> <a href="#tech issues">Appendix B: Technical Issues</a>
	<ul>
	<h3>
	<li> <a href="#iso9660">ISO9660 Compliance</a>
	<li> <a href="#cr-lf">Carriage Return-Line Feed Convention</a>
	</h3>
	</ul>
<li> <a href="#acknowledgments">Acknowledgments</a>
</h2>
</ul>

<hr>

<p>
<a name="introduction"> <center><h2> Introduction </h2></center> </a>
<p>
The U.S. Naval Observatory has produced high precision ephemerides for the
asteroids:
<ul>
<li> 1 Ceres
<li> 2 Pallas
<li> 3 Juno
<li> 4 Vesta
<li> 6 Hebe
<li> 7 Iris
<li> 8 Flora
<li> 9 Metis
<li> 10 Hygiea
<li> 15 Eunomia
<li> 16 Psyche
<li> 52 Europa
<li> 65 Cybele
<li> 511 Davida
<li> 704 Interamnia
</ul>
The description of the ephemerides can be found in <a href="#hilton 1997">
Hilton (1997)</a> and <a href="#hilton 1999">Hilton (1999)</a>.
<p>
This CD-ROM provides the ephemerides for these asteroids in tabular ASCII
format. In addition there is source code in C to convert the ephemerides to
Chebyshev polynomials and interpolate them. Converting the ephemerides from
ASCII to Chebyshev polynomials is recommended because the Chebyshev polynomials
are much more compact than the tabular data and positions and velocities can
quickly be interpolated from them for any arbitrary date.
<p>
<a href="#ephemerides">"Ephemerides Files,"</a> describes the ephemeris files.
<a href="#generating">"Generating the Chebyshev Polynomials,"</a> describes how
to produce Chebyshev polynomial files for quick interpolation. <a
href="#reading">"Reading the Ephemerides,"</a> gives a description of how to
use the C functions to access the ephemerides. <a href="#testing">"Testing the
Ephemerides,"</a> describes how to test the Chebyshev polynomials of the
ephemerides. <a href="#references">"References,"</a> gives references for
finding more detailed information on the ephemerides. Appendix A: <a
href="#novas">NOVAS</a> gives information on using the ephemerides with NOVAS-C,
the Naval Observatory Vector Astrometry Subroutines in C. Appendix B: <a
href="#tech issues">Technical Issues</a> discusses those technical issues that
place restrictions on the implementation of these ephemerides.
<p>
These ephemerides are provided on an "as is" basis. The U.S. Naval Observatory  
can not provide individual assistance in the implementation or use of these
ephemerides.
<p>
<a name="ephemerides"> <center><h2> Ephemerides Files </h2></center> </a>
<p>
The asteroid ephemerides are stored in tabular format in individual ASCII
character files. The files are named <i>asteroidname.eph</i> (<a
href="#iso9660">see Appendix B: Technical Issues on shortened name for 
Interamnia</a>). The tabulation gives the Julian date - 2400000, the Cartesian
coordinates for the asteroid in AU, and the velocity vector of the asteroid in
AU day<sup>-1</sup>. The coordinate system is the Cartesian heliocentric
equatorial system of the mean equator and equinox of J2000.0. The tabulation
interval is 2.0 Julian Days. The ephemeris files are located in the <i>ephem</i>
directory on the CD-ROM.
<p>
<a name="generating"> <center><h2> Generating the Chebyshev Polynomials </h2>
</center> </a>
<p>
You can generate your own binary Chebyshev polynomial ephemeris to be read by
the ephemeris reading function. The source code file, <i>makeph.c</i>, and all
of the subsidiary files, <i>generate.c, allocate.c</i>, and <i>chby.c</i>,
needed to generate the Chebyshev polynomials are located in the <i>software</i>
directory on the CD-ROM. There is also a makefile, <i>usnoae98.mak</i>, to compile
and link the program on Unix systems. The makefile generates an executable called
<i>makeph</i>. 

<p>When you run the <i>makeph</i> it first prompts you for the asteroid number
and name.  Assuming that the name you give the program is <i>AsteroidName</i>,
The program then looks for the ASCII ephemeris file <i>AsteroidName.eph</i>
which it will convert to a binary Chebyshev polynomial file called
<i>AsteroidName.chby</i>. You are free to rename the asteroid files as
long as you keep the <i>.eph</i> and <i>.chby</i> file extensions.
<p>
Next, the program prompts you for a tolerance in the fit of the Chebyshev
polynomial. A tolerance of 10<sup>-12</sup> is small enough that the precision
of the resulting Chebyshev polynomials will be two orders of magnitude greater
than the uncertainties in the positions and velocities of the most accurate of
the asteroids.
<p>
Finally, the program prompts you for a header string delimited by "". The
header string can contain any information you want to add to the ephemeris file. 
The string is inserted into the ephemeris file at the beginning along with the
asteroid number, name and the tolerance of the Chebyshev polynomials.
<p>
<b>Converting from an ASCII ephemeris file to Chebyshev polynomials is
computation intensive, so it may take several minutes.</b>
<p>
If you desire, you may produce a Chebyshev polynomial file from your own
asteroid ephemeris file. All you have to do is provide an ASCII ephemeris file.
The file is named <i>AsteroidName.eph</i>. Each line contains first the Julian
date - 240000, the Cartesian coordinates for the asteroid, and the velocity of
the asteroid. As long as each item is delimited by at least one space, the
program does not require any further formatting in the ephemeris file. Any
Cartesian coordinate system or system of units are fine as long as they are
consistent with any other ephemerides being used.
<p>
The Chebyshev polynomial representation has the advantage that the position and
velocity for any date within the valid time period of the ephemeris can be
interpolated easily. The disadvantage is that the values produced by the
Chebyshev polynomials are not exactly the same as that of the tabulated
ephemeris; however, the difference between the tabulated and the Chebyshev
representations can be made arbitrarily small. The coefficients of the
Chebyshev polynomials were calculated using the algorithm detailed in <a
href="#newhall 1989">Newhall (1989)</a> which is also used for distribution of
the JPL DE-series planetary ephemerides. However, since asteroid orbits are
generally more elliptical than planetary orbits, neither the granule length nor
the degree of the polynomial are fixed, but are calculated for each orbital
segment. As a result, the Chebyshev polynomial representations are extremely
compact, fitting a 300 year asteroid ephemeris into just over 680KB.
<p>
<a name="reading"> <center><h2> Reading the Ephemerides </h2></center> </a>
<p>
The binary ephemerides can be read using the functions found in the file
<i>readeph.c</i>. In addition to <i>readeph</i> you need to link in the code 
from <i>chby.c</i> and <i>allocate.c</i>. All three of these files are found in 
the <i>software</i> directory.
<p>
The software to read the ephemerides consists of a function to read the
ephemerides, functions to initialize and clean up the files after use of the
ephemerides, and utility functions, used by the ephemeris reading functions.
<p>
Before reading any ephemerides files first call the function:
<ul>
<li>	void initeph( void );
</ul>
This function initializes the variable <i>astinf.num</i> to 0. This variable is
used to keep track of the number of asteroid ephemerides files that have
been accessed, so it is possible to access multiple asteroid files without
initializing them each time they are called.
<p>
To read the ephemerides you can call the function:
<ul>
<li> double* readeph( int <i>mp</i>, char *<i>name</i>, double <i>jd</i>, int <i>err</i> );
</ul>
where <i>mp</i> is the asteroid's number, <i>name</i> is the asteroid's name,
<i>jd</i> is the Julian date, and <i>err</i> is a flag returned describing
any errors encountered in interpolating the ephemeris. Possible returns are:
0 ( no error ), 1 ( memory allocation error ), 2 ( mismatch between asteroid
name and number ), 3 ( Julian date out of bounds ), and 4 ( can not find
Chebyshev polynomial file ).
<p>
The return from the ephemeris function is a pointer to six double precision
numbers. The first three are the equatorial Cartesian coordinates of the
asteroid in AU on the mean equator and equinox of J2000.0 and the next three
numbers comprise the associated velocity vector in AU day<sup>-1</sup>.
<p>
To make sure that the right asteroid ephemeris is being accessed, the functions
compare the name and number of the asteroid ephemeris.
<p>
The function <i>readeph</i> assumes that the asteroid ephemeris file has the
name <i>AsteroidName.chby</i> and it is located in the present working directory.
<p>
When you are finished using the asteroid ephemerides, call the function
<ul>
<li> void cleaneph( void );
</ul>
This function makes sure that all of the ephemerides files are properly closed.
<p>
<a name="testing"> <center><h2> Testing The Ephemerides </h2></center> </a>
<p>
There is a program <i>readtest.c</i> to compare the Chebyshev ephemeris files 
with test result files. The <i>usnoae98.mak</i> makefile will construct
<i>readtest</i>, on Unix platforms. On other computers you need to compile the
code using a C compiler, and link it with the code compiled from the <i>readeph.c,
allocate.c</i>, and <i>chby.c</i> all found in the <i>software</i> directory.
The test data for each asteroid is available in the <i>tstfiles</i> directory.
The names of the test files are in the format <i>asteroidname.tst</i> (<a 
href="#iso9660">see Appendix B: Technical Issues on shortened name for 
Interamnia</a>). The test files were written using Chebyshev binary files
computed with a tolerance of 10<sup>-12</sup>. Thus if you use the same
tolerance you should get agreement to that level of precision.
<p>
The <i>readtest</i> executable will prompt the user for both the asteroid name
and number. The program assumes that both the ephemeris and comparison files are
in the present working directory.
<p>
<a name="references"> <center><h2> References </h2></center> </a>
<p>
<a name="dunham 1990">Dunham, D.W., et al. 1990,</a> <i>The Size and Shape of
(2) Pallas from the 1983 Occultation of 1 Vulpeculae</i>, <b>Astron. J.</b>,
<b>99</b>, 1636
<p>
<a name="hilton 1997"><a href="./docs/astereph.htm">Hilton, J. L. 1997, New
Asteroid Ephemerides for the Astronomical Almanac</a></a>
<p>
<a name="hilton 1999">Hilton, J.L. 1999, New Asteroid Ephemerides for the
Astronomical Almanac</a>, <b>Astron. J.</b>, <b>117</b>, 1077-1086.
<p>
<a name="kaplan 1990">Kaplan, G.H. 1990</a>, Bull. Amer. Astron. Soc.,
<b>22</b>, 930 - 931
<p>
<a name="newhall 1989"> Newhall, X X 1989,</a> <i>Numerical Representation of
Planetary Ephemerides</i>, <b> Celestial Mechanics </b>, <i>45</i>, 305 - 310
<p>
<a name="thomas & zellner 1997">Thomas, P. & Zellner, B. 1997,</a> <b>Asteroid
Vesta</b> <i>Hubble Space Telescope - Wide Field Planetary Camera 2 PPC97-27 - 
STScI</i> OPO - September 4, 1997
<p>
<a name="weinberger">Weinberger, A.J.</a>, Mail Code 156205, University of
California, Los Angeles, Los Angeles, CA 90095-1562

<a name="novas"> <center><h2> NOVAS </h2></center> </a>
<p>
The asteroid ephemerides can be used with <a
href="http://aa.usno.navy.mil/AA/software/novas/novas_info.html">NOVAS</a>,
Naval Observatory Vector Astrometry Subroutines by <a href="#kaplan 1990">Kaplan
(1990)</a>. The NOVAS functions, available
in C and FORTRAN, are used for the computation of a wide variety of astrometric
quantities and transformations. NOVAS can determine the instantaneous
coordinates (apparent, topocentric, or astrometric) of any star or solar system
body, if the needed ephemerides are available.
<p>
In particular, NOVAS-C, the C version of NOVAS, is designed to include
<i>readeph</i> directly. The novas.h file contains a struct called <i>body</i>
that looks like this:
<pre>
	typedef struct {
		short unsigned int <i>type</i>;
		short unsigned int <i>number</i>;
		char  <i>name</i>[100];
	} body;
</pre>
The variable <i>type</i> is set to 0 for the major planets, the Sun, and the
Moon, and to 1 for the asteroids.  If <i>type</i> = 0,  then <i>number</i> = 1
for Mercury, ..., = 9 for Pluto, = 10 for the Sun, = 11 for the Moon.  If
<i>type</i> = 1, then <i>number</i> is the asteroid's number.  The variable
<i>name</i> is the body's name. Both a number and name are required because
there is some duplication of names of minor bodies in the solar system. For
example both Jupiter V and asteroid 113 are named Amalthea.
<p>
Many of NOVAS's functions require the use of ephemerides of the planets as well
as the ephemerides of the asteroids. NOVAS is written to make use of the JPL
planetary ephemerides such as <a
href="http://www.willbell.com/software/jpl.htm">DE200 and DE405</a>.
<p>
If you want barycentric coordinates of the asteroid the function:
<ul>
<li> double *tossbary( double <i>jd</i>, double *<i>posvel</i> );
</ul>
used in conjunction with NOVAS-C will convert from the heliocenter to the
barycenter. The variable <i>jd</i> is the Julian date for the conversion and
<i>posvel</i> is a vector containing the Cartesian position and velocity, in
that order, to be converted. The return is a pointer to the Cartesian position
and velocity vector in barycentric coordinates. The function <i>tossbarry</i>
assumes that all ephemerides used have the same units and orientation for the
coordinate systems.

<a name="tech issues"><center><h2>Appendix B: Technical Issues</h2></center></a>

<a name="iso9660"><h3>ISO9660 Compliance</h3></a>

The files on this CR-ROM were written in compliance to the ISO9660 standards. 
These standards require that the file names consist of a name with a maximum of
eight characters, a '.', and an extension of at most three characters. The
file name standard is also not case sensitive.  As a result:
	<ol>
	<li> All file names are written in lower case. On Macintosh systems,
	however, the names appear to be in upper case.
	<li> The ephemeris and test files for asteroid 704 Interamnia have been
	shortened to <i>interamn.*</i> to comply with the 8.3 file name convention.
	</ol>

<a name="cr-lf"><h3>Carriage Return-Line Feed Conventions</h3></a>

The three main computer operating systems, Windows, Macintosh, and Unix use
different conventions for designating the end of a line. In Windows, the end of
a line is designated by a carriage return and a line feed. On a Macintosh, only
a carriage return is required. And Unix only requires a line feed. The ASCII
files on this CD-ROM are written using the Unix format for two reasons. First,
it is expected that the majority of the users of this CD-ROM will be using the
Unix operating system. Second, the only case found in testing the ephemerides
where the different conventions made a difference was on a Unix platform. In 
this case the <i>make</i> facility was unable to function properly with lines 
terminated with a carriage return-line feed.

<a name="acknowledgments"><center><h2>Acknowledgments</h2></center></a>

The author would like to acknowledge the following people for their help in
producing this CD-ROM. Mr. William Harris and Ms. Wendy Hultquist for testing
the software on other platforms and making suggestions on improving the
readability of the code. Drs. <a href="#weinberger">Alycia Weinberger</a>,
<a href="#dunham 1990">David Dunham</a>, <a href="#thomas & zellner 1997">Peter
Thomas, and Ben Zellner</a> for permission to use observations they have made of
the asteroids Ceres, Pallas, and Vesta in the cover art for the CD-ROM. Dr. Marc
Murison for helping me cut the master CD-ROM. Dr. Alan Fiala for shepherding the
CD-ROM through the manufacturing process. Dr. George Kaplan and Mr. John Bangert
for overseeing the entire project, reading and commenting on the code, and
making sure that the project of producing this CD-ROM was brought to a
successful conclusion.

<hr>



<i> Last Modified: February 1, 1999 </i>

<hr>
</body>
</html>
